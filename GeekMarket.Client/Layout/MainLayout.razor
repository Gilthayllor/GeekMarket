@inherits LayoutComponentBase


<MudThemeProvider Theme="_themeManager.Theme" />
<MudDialogProvider />
<MudSnackbarProvider />
<MudLayout>
    <MudAppBar ToolBarClass="application-toolbar" Elevation="1">
        <MudContainer Class="d-flex flex-row align-center">
            <MudLink Class="application-logo d-inline-flex" Href="/">
                <MudImage Src="./assets/logo_geekmarket.svg"></MudImage>
            </MudLink>
            <MudSpacer />
            <MudNavMenu>
                <MudLink Href="/products" Underline="Underline.None">Produtos</MudLink>
            </MudNavMenu>
        </MudContainer>
        <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@((e) => DrawerToggle())" Class="application-drawer-toggle" />
    </MudAppBar>
    <MudDrawer @bind-Open="_drawerOpen" ClipMode="DrawerClipMode.Always" Anchor="Anchor.Right" DisableOverlay>
        <MudButton>Test</MudButton>
    </MudDrawer>
    <MudMainContent>
        @Body
    </MudMainContent>
</MudLayout>

<MudThemeManagerButton OnClick="@((e) => OpenThemeManager(true))" />
<MudThemeManager Open="_themeManagerOpen" OpenChanged="OpenThemeManager" Theme="_themeManager" ThemeChanged="UpdateTheme" />

@code {
    private ThemeManagerTheme _themeManager = new ThemeManagerTheme();
    private bool _drawerOpen;
    public bool _themeManagerOpen = false;

    void OpenThemeManager(bool value)
    {
        _themeManagerOpen = value;
    }

    void UpdateTheme(ThemeManagerTheme value)
    {
        _themeManager = value;

        StateHasChanged();
    }

    private void DrawerToggle()
    {
        _drawerOpen = !_drawerOpen;
    }

    protected override void OnInitialized()
    {
        _themeManager.Theme = new MudTheme
            {
                LayoutProperties = new LayoutProperties
                {
                    AppbarHeight = "80px",
                },
                Palette = new PaletteLight
                {
                    Primary = new MudColor("#011638"),
                    DrawerBackground = new MudColor("#ecf0ff"),
                    AppbarBackground = new MudColor("#ecf0ff"),
                    AppbarText = new MudColor("#011638"),
                }
            };

        StateHasChanged();
    }
}